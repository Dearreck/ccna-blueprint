<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 640 512%22><path fill=%22%230d6efd%22 d=%22M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9v16.8c0 22.4 12.1 42.4 30.7 52.5L192 422.2V320c0-17.7 14.3-32 32-32s32 14.3 32 32v102.2l113.3-61.1c18.6-10 30.7-30.2 30.7-52.5v-16.8c0-32.1-9.3-62.6-25.8-88.4l57.9-20.9C633.7 179.1 640 170.1 640 160s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408.2c-12.4 7.1-19.8 20.9-19.8 35.8v32c0 14.9 7.4 28.7 19.8 35.8l64 36.6c12.4 7.1 27.2 7.1 39.6 0l64-36.6c12.4-7.1 19.8-20.9 19.8-35.8v-32c0-14.9-7.4-28.7-19.8-35.8L256 371.7c-12.4-7.1-27.2-7.1-39.6 0l-64 36.6zM448 408.2c-12.4 7.1-19.8 20.9-19.8 35.8v32c0 14.9 7.4 28.7 19.8 35.8l64 36.6c12.4 7.1 27.2 7.1 39.6 0l64-36.6c12.4-7.1 19.8-20.9 19.8-35.8v-32c0-14.9-7.4-28.7-19.8-35.8L576 371.7c-12.4-7.1-27.2-7.1-39.6 0l-64 36.6z%22/></svg>">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="../../assets/css/main.css">
    <script src="../../assets/js/theme-loader.js"></script>
</head>
<body data-title="Herramienta de Subneteo - CCNA Blueprint">

    <div id="navbar-placeholder"></div>

    <main class="container py-4">
        <div class="subnet-tool-container card">
            <div class="card-header">
                <div class="text-center">
                    <h1 class="h3 mb-1">Herramienta de Subneteo IPv4</h1>
                    <p class="text-muted small">Calculadora y generador de ejercicios para Classful y VLSM.</p>
                </div>
                <ul class="nav nav-pills justify-content-center mt-3" id="mode-tabs">
                    <li class="nav-item">
                        <button id="btnCalculatorMode" class="nav-link active" type="button">Calculadora</button>
                    </li>
                    <li class="nav-item">
                        <button id="btnExerciseMode" class="nav-link" type="button">Ejercicios</button>
                    </li>
                </ul>
            </div>
            <div class="card-body p-lg-4">
                <section id="calculatorMode" class="mode-content active">
                    <div class="calculator-options mb-4 text-center">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="calcType" id="calcTypeClassful" value="classful">
                            <label class="form-check-label" for="calcTypeClassful">Subneteo Classful</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="calcType" id="calcTypeVlsm" value="vlsm" checked>
                            <label class="form-check-label" for="calcTypeVlsm">Subneteo Classless (VLSM)</label>
                        </div>
                    </div>

                    <form id="classfulForm" class="subnet-form p-3">
                        <h4 class="form-section-title">Subneteo Classful</h4>
                        <div class="row g-3 align-items-center">
                            <div class="col-md-7">
                                <label for="classfulNetworkIp" class="form-label">Dirección IP de Red:</label>
                                <input type="text" id="classfulNetworkIp" class="form-control" placeholder="Ej: 192.168.1.0" required>
                                <small class="ip-info text-muted"></small>
                            </div>
                            <div class="col-md-5">
                                <label class="form-label">Requisito:</label>
                                <div class="input-group">
                                    <div class="input-group-text">
                                        <input class="form-check-input mt-0" type="radio" id="reqSubnets" name="classfulRequirement" value="subnets" checked>
                                    </div>
                                    <input type="number" id="numSubnets" class="form-control" placeholder="Nº de Subredes" min="2">
                                </div>
                                <div class="input-group mt-2">
                                    <div class="input-group-text">
                                        <input class="form-check-input mt-0" type="radio" id="reqHosts" name="classfulRequirement" value="hosts">
                                    </div>
                                    <input type="number" id="numHosts" class="form-control" placeholder="Hosts por Subred" min="2">
                                </div>
                            </div>
                        </div>
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-3">
                            <button type="button" id="resetClassfulBtn" class="btn btn-outline-secondary">Limpiar</button>
                            <button type="submit" class="btn btn-primary">Calcular Subredes</button>
                        </div>
                    </form>

                    <form id="vlsmForm" class="subnet-form active p-3">
                        <h4 class="form-section-title">Subneteo Classless (VLSM)</h4>
                        <div class="mb-3">
                            <label for="vlsmNetworkIp" class="form-label">Dirección IP de Red/Prefijo:</label>
                            <input type="text" id="vlsmNetworkIp" class="form-control" placeholder="Ej: 172.16.0.0/22" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Requisitos de Hosts por Subred:</label>
                            <p class="small text-muted mb-2">Introduce los requisitos de mayor a menor para un cálculo VLSM correcto.</p>
                            <div id="vlsmRequirements">
                                <div class="vlsm-requirement input-group mb-2">
                                    <input type="number" class="form-control" min="1" placeholder="Nº de Hosts" required>
                                    <input type="text" class="form-control" placeholder="Nombre de Red (Opcional)">
                                    <button type="button" class="btn btn-outline-danger remove-req">-</button>
                                </div>
                            </div>
                            <button type="button" id="addVlsmRequirement" class="btn btn-sm btn-outline-success mt-2">Añadir Requisito (+)</button>
                        </div>
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-3">
                            <button type="button" id="resetVlsmBtn" class="btn btn-outline-secondary">Limpiar</button>
                            <button type="submit" class="btn btn-primary">Calcular Subredes VLSM</button>
                        </div>
                    </form>

                    <div id="calculatorResults" class="results-area mt-4">
                        <h4 class="form-section-title">Resultados del Cálculo</h4>
                        <div id="calcSummary" class="mb-3"></div>
                        <div id="calcTableContainer" class="table-responsive">
                            <p class="text-muted">Introduce los datos y haz clic en calcular.</p>
                        </div>
                    </div>
                </section>

                <section id="exerciseMode" class="mode-content">
                    <div class="exercise-options d-flex justify-content-center align-items-center gap-3 p-3 rounded mb-4">
                        <label for="exerciseType" class="form-label mb-0">Tipo de Ejercicio:</label>
                        <select id="exerciseType" class="form-select w-auto">
                            <option value="classful">Classful</option>
                            <option value="vlsm">Classless (VLSM)</option>
                        </select>
                        <button id="generateExercise" class="btn btn-primary">Generar Nuevo Ejercicio</button>
                    </div>
                    <div id="exercisePrompt" class="exercise-area">
                        <h4 class="form-section-title">Problema</h4>
                        <p class="text-muted">Haz clic en "Generar Nuevo Ejercicio" para comenzar.</p>
                    </div>
                    <div id="exerciseSolutionInput" class="exercise-area mt-3" style="display: none;">
                        <h4 class="form-section-title">Tu Solución</h4>
                        <p class="small text-muted">Completa los detalles para cada subred requerida.</p>
                        <div id="userAnswerTableContainer" class="table-responsive"></div>
                        <div class="d-flex justify-content-end gap-2 mt-3">
                            <button id="showSolutionBtn" class="btn btn-outline-secondary" style="display: none;">Mostrar Solución</button>
                            <button id="checkAnswer" class="btn btn-primary">Verificar Respuesta</button>
                        </div>
                    </div>
                    <div id="exerciseFeedback" class="exercise-area feedback mt-3" style="display: none;">
                        <h4 class="form-section-title">Feedback</h4>
                        <p></p>
                    </div>
                    <div id="exerciseSolution" class="exercise-area mt-3" style="display: none;">
                        <h4 class="form-section-title">Solución Detallada</h4>
                        <div id="solutionTableContainer" class="table-responsive"></div>
                        <div class="explanation-controls mt-3 p-3 rounded d-flex align-items-center gap-3 flex-wrap">
                            <label for="exerciseExplanationMethod" class="form-label mb-0">Método de Explicación:</label>
                            <select id="exerciseExplanationMethod" class="form-select w-auto">
                                <option value="magic">Magic Number</option>
                                <option value="wildcard">Wildcard (Conceptual)</option>
                            </select>
                            <button id="showSolutionSteps" class="btn btn-secondary">Mostrar Pasos</button>
                        </div>
                        <div id="solutionStepsContent" class="mt-3 p-3" style="display: none;"></div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/main.js"></script>
    <script src="../../assets/js/subnetting-tool.js"></script>
</body>
</html>
